# 演示代码

## 预处理

### 数据概述
1. 文件说明
   | 文件名 | 内容描述及总数 |
   | ----- | ------ |
   | `triple_zh.txt` | 中文关系的三元组，共 104941 个 |
   | `triple_en.txt` | 英文关系的三元组，共 162544 个 |
   | `ILLs(zh-en).txt` | 中英关键词转换，共 13636 个 |
   | `train_data.txt` | 训练集，共 14262 个 |
   | `valid_data.txt` | 验证集，共 1500 个 |



### 预处理目标
1. 数据标准化 // 去除链接，方便观察
   - 将 `triple_zh/triple_en` 转为标准三元组 
   - 从 `ILLs(zh-en)` 获取二元组
   - 将 `train_data` 的问题和解答分开，并转为标准形式，比如
   ```py
   {2} Que
   sub   rel   sub
   sub   rel   sub
   ```

2. 数据统计 // 用于估计计算量
   - `triple_zh.txt` 的不重复的实体/关系总数，以及词频排序（前 10 个） 
   - `triple_en,txt` 的不重复的实体/关系总数，以及词频排序（前 10 个） 

3. 提取训练集 `train_data` 中的混合输入 // 用于辅助 NER，或者 NER 会自动处理这种情形？
   - 主干英文，关键词中文的情形
   - 主干中文，关键词英文的情形
   - 法文与英文的区分

4. 分析训练集 `traning_data` 的答案 // 判断是否需要实体对齐等
   - 问题 => 三元组 1
   - 三元组 1 => 三元组 2
   - 三元组 2 => 三元组 3


### 预处理结果

1. 标准化的文件放在 `extract/` 目录下

2. 不重复的实体/关系数目
   | 文件名 | 实体数 | 关系数 | 中文关系数 |
   | ----- | ------ | ------ | ------ |
   | `triple_zh.txt` |  | 1155 | 58 |
   | `triple_en.txt` |  | 1637 | 0 |

3. 词频排序
   | 文件名 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 |
   | ----- | --- | --- | --- | --- | --- | --- | --- | --- |
   | `triple_zh` 实体 |  |  |   |    |  |  |  |  |  |  |
   | `triple_en` 实体 |  |  |   |    |  |  |  |  |  |  |
   | `triple_zh` 关系 |  |  |   |    |  |  |  |  |  |  |
   | `triple_en` 关系 |  |  |   |    |  |  |  |  |  |  |

4. 分析训练集的解答
   - 过程 “三元组 i => 三元组 i+1” 只需使用 【】
   - 过程 “问题 => 三元组 1” 存在特殊情况
   

### 数据分析结果
   
   对关键词和连接词做训练，提交答案时再还原完整链接
2. `ILLs(zh-en).txt` 
   - 并不是所有 `triple_zh.txt` 中的元素都能通过这个文件翻译为英文，仅有 1/10 多一点
   - 该文件更主要的作用是与训练集结合

### 待进行的分析
获取在训练集中的混合模式，比如
   - 主干为汉字，夹杂英文关键词
   - 主干为英文，夹杂中文关键词
   - 英法，汉法同理

夹杂的关键词有很大概率会被提取（但是否 100% 适用需再确认）